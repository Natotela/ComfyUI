{"last_node_id":46,"last_link_id":90,"nodes":[{"id":9,"type":"EmptyLatentImage","pos":[42.35586526679985,228.94394004058793],"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[75],"slot_index":0}],"title":"Image Size","properties":{},"widgets_values":[768,768,1],"color":"#432","bgcolor":"#653"},{"id":37,"type":"ControlNetApply","pos":[402.6849944043588,623.1451785777685],"size":{"0":317.4000244140625,"1":98},"flags":{},"order":13,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":63},{"name":"control_net","type":"CONTROL_NET","link":62},{"name":"image","type":"IMAGE","link":65}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[73,88],"slot_index":0}],"title":"Pose Strenght","properties":{},"widgets_values":[1],"color":"#223","bgcolor":"#335"},{"id":38,"type":"ControlNetLoader","pos":[410.6849944043588,1024.1451785777701],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[62],"slot_index":0}],"title":"Pose Control","properties":{},"widgets_values":["controlnetPreTrained_openposeV10.safetensors"],"color":"#223","bgcolor":"#335"},{"id":11,"type":"VAELoader","pos":[44.35586526679985,483.94394004058864],"size":{"0":315,"1":58},"flags":{},"order":2,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[7,15,20],"slot_index":0}],"properties":{},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"],"color":"#432","bgcolor":"#653"},{"id":6,"type":"CLIPTextEncode","pos":[444.35397143554667,87.14199485397337],"size":{"0":400,"1":200},"flags":{},"order":11,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":19}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[32,63],"slot_index":0}],"title":"Positive","properties":{},"widgets_values":["(curvy princess:1.3), ([Margot Robbie|Scarlett Johansson]:1.2), photorealistic, blonde curly hair, tan, (pixar style:1.3), (illustrated by Helene Knoop:0.4), tiara, ornate dress, robe, hypermaximalised, detailed face, (lace:1.2), cutout, breasts, \nbeautiful,good anatomy, detailed and intricate, \nskin pores, subsurface scattering, \nmasterpiece, best quality, realistic, sharp focus, absurdres"],"color":"#233","bgcolor":"#355"},{"id":7,"type":"CLIPTextEncode","pos":[448.3539714355467,331.14199485397336],"size":{"0":395.0827331542969,"1":151.76531982421875},"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":18}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[74,77],"slot_index":0}],"title":"Negative","properties":{},"widgets_values":["(cropped), ((out of frame)), blushing, freckles, ((hands)), missing arms, missing legs, ((asian face)),  lowres, artist name, logo,(slim waist), ((extra fingers)), mutated hands, poorly drawn hands, poorly drawn face, (mutation), (deformed), (ugly), (bad anatomy), extra limbs, cloned face, glitchy, extra arms, extra hands, mangled fingers, ugly face, extra legs, ((male)), lowres, text, error, missing fingers, extra digit,  low quality, jpeg artifacts, signature, watermark, username, censorship, ugly,(deformed:1.1), (amateur drawing:1.2),"],"color":"#322","bgcolor":"#533"},{"id":34,"type":"LoadImage","pos":[889.0458271484367,30.97407962036118],"size":{"0":322.8268127441406,"1":322.076904296875},"flags":{},"order":3,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[58],"slot_index":0},{"name":"MASK","type":"MASK","links":null}],"title":"Load Addition","properties":{},"widgets_values":["bgmask.png","image"],"color":"#232","bgcolor":"#353"},{"id":5,"type":"ControlNetLoader","pos":[1215.0458271484385,33.97407962036119],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[10],"slot_index":0}],"title":"Depth Control","properties":{},"widgets_values":["controlnetPreTrained_depthV10.safetensors"],"color":"#232","bgcolor":"#353"},{"id":12,"type":"PreviewImage","pos":[944.6849944043581,621.1451785777685],"size":{"0":596.3074340820312,"1":682.2813720703125},"flags":{},"order":17,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":8}],"title":"Seed Preview","properties":{},"color":"#223","bgcolor":"#335"},{"id":20,"type":"PreviewImage","pos":[1908.5576865234384,637.4779526367184],"size":{"0":581.35546875,"1":667.0643920898438},"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":86}],"title":"Latent Input Preview","properties":{},"color":"#323","bgcolor":"#535"},{"id":44,"type":"SaveImage","pos":[2519,614],"size":{"0":782.750244140625,"1":689.63623046875},"flags":{},"order":23,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":83}],"properties":{},"widgets_values":["ComfyUI"],"color":"#233","bgcolor":"#355"},{"id":16,"type":"VAEDecode","pos":[2525,527],"size":{"0":314.5018615722656,"1":46},"flags":{},"order":22,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":81,"slot_index":0},{"name":"vae","type":"VAE","link":20}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[83],"slot_index":0}],"properties":{},"color":"#233","bgcolor":"#355"},{"id":13,"type":"VAEDecode","pos":[725.6849944043578,622.1451785777685],"size":{"0":210,"1":46},"flags":{},"order":16,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":82},{"name":"vae","type":"VAE","link":7}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[8,59],"slot_index":0}],"properties":{},"color":"#223","bgcolor":"#335"},{"id":36,"type":"MiDaS-DepthMapPreprocessor","pos":[1574.5576865234382,640.4779526367184],"size":{"0":319.7036437988281,"1":82},"flags":{},"order":18,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":59}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[60,86],"slot_index":0}],"properties":{},"widgets_values":[6.283185307179586,0.1],"color":"#323","bgcolor":"#535"},{"id":15,"type":"VAEEncode","pos":[1218,508],"size":{"0":319.3245544433594,"1":46},"flags":{},"order":19,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":60},{"name":"vae","type":"VAE","link":15}],"outputs":[{"name":"LATENT","type":"LATENT","links":[76],"slot_index":0}],"properties":{},"color":"#232","bgcolor":"#353"},{"id":46,"type":"CLIPTextEncode","pos":[1564,-15],"size":{"0":918.0118408203125,"1":582.0287475585938},"flags":{},"order":5,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":null}],"properties":{},"widgets_values":["Disclaimer:\n\nI don't know why it works the way it does.\n\nI used different \"masks\" in the load addition node aswell, with vastly different results but all returned backgrounds. Also the same mask in different colors.\nThis one is strickly a gradient of white created on a completely black background.\n\nI can only presume that the AI uses it as some sort of guidance to distribute noise. \n\nThe green condition combine node input order actually matters. The output of the green \"Depth Strenght\" has to go into the lower input.\nThe upper input of that node comes from CLIP positive with the pose.\n\nThe blue sampler section does nothing more than to produce a depth map which is then encoded to latent and used as latent input for the cyan colored output sampler.\n\nDoesn't make sense to me, but thats how it came about.\n\nFor the green image scale, I would suggest to always match it with your original image size with crop DISABLED\n\nDEPTH STRENGHT setting can change the final image quite a bit, and you will lose weight of the original positive prompt if its too high. \nYou can start as low as 0 in some cases, but if background appears you want to increase it, even up to a strenght of 1. (lower is better)\n\nIf you haven't already I suggest you download and install \n\nFannovels preprocessors found here\n\nhttps://github.com/Fannovel16/comfy_controlnet_preprocessors\n\nThe seed node and the Sampler with seed input you can download here\n\nhttps://civitai.com/api/download/models/25829\n\nThe openpose and depth models are found here\n\nhttps://civitai.com/models/9251/controlnet-pre-trained-models\n\nYou could also try using WAS's depth preprocessor, but I found it to create a depth map that is too detailed, or doesn't have the threshold that is useful for this.\n\nThe model I am using you can find here\n\nhttps://civitai.com/models/21343/rpgmix\n\nI know it has a different name in here but its the same model ;)"],"color":"#322","bgcolor":"#533"},{"id":8,"type":"ImageScale","pos":[1217.0458271484385,126.97407962036115],"size":{"0":315,"1":130},"flags":{"collapsed":false},"order":9,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":58}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[57],"slot_index":0}],"properties":{},"widgets_values":["bilinear",768,768,"disabled"],"color":"#232","bgcolor":"#353"},{"id":1,"type":"CheckpointLoader","pos":[40.355865266799846,72.94394004058799],"size":{"0":315,"1":122},"flags":{},"order":6,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[72,79],"slot_index":0},{"name":"CLIP","type":"CLIP","links":[18,19],"slot_index":1},{"name":"VAE","type":"VAE","links":null}],"title":"Model","properties":{},"widgets_values":["v1-inference.yaml","rpg+pix+faefp16.safetensors"],"color":"#432","bgcolor":"#653"},{"id":40,"type":"ConditioningCombine","pos":[1220,425],"size":{"0":318.94549560546875,"1":46},"flags":{},"order":15,"mode":0,"inputs":[{"name":"conditioning_1","type":"CONDITIONING","link":88},{"name":"conditioning_2","type":"CONDITIONING","link":69}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[90],"slot_index":0}],"properties":{},"color":"#232","bgcolor":"#353"},{"id":4,"type":"ControlNetApply","pos":[1218.0458271484385,286.9740796203614],"size":{"0":315.7036437988281,"1":98},"flags":{},"order":12,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":32},{"name":"control_net","type":"CONTROL_NET","link":10},{"name":"image","type":"IMAGE","link":57}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[69],"slot_index":0}],"title":"Depth Strenght","properties":{},"widgets_values":[0.7000000000000005],"color":"#232","bgcolor":"#353"},{"id":39,"type":"LoadImage","pos":[37.684994404359,628.1451785777685],"size":{"0":357.7530822753906,"1":457.8828430175781},"flags":{},"order":8,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[65],"slot_index":0},{"name":"MASK","type":"MASK","links":null}],"title":"Load Pose","properties":{},"widgets_values":["standing3 (1).png","image"],"color":"#223","bgcolor":"#335"},{"id":41,"type":"Seed","pos":[43.35586526679985,369.94394004058796],"size":{"0":315,"1":82},"flags":{},"order":7,"mode":0,"outputs":[{"name":"SEED","type":"SEED","links":[71,80],"slot_index":0}],"properties":{},"widgets_values":[565557954831751,false],"color":"#432","bgcolor":"#653"},{"id":42,"type":"KSampler (WAS)","pos":[408.6849944043588,761.1451785777688],"size":{"0":315,"1":234},"flags":{},"order":14,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":72},{"name":"seed","type":"SEED","link":71},{"name":"positive","type":"CONDITIONING","link":73},{"name":"negative","type":"CONDITIONING","link":74},{"name":"latent_image","type":"LATENT","link":75}],"outputs":[{"name":"LATENT","type":"LATENT","links":[82],"slot_index":0}],"title":"Pre Render (WAS) Sampler","properties":{},"widgets_values":[15,8,"dpmpp_sde","normal",1],"color":"#223","bgcolor":"#335"},{"id":43,"type":"KSampler (WAS)","pos":[2524,256],"size":{"0":315,"1":234},"flags":{},"order":21,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":79},{"name":"seed","type":"SEED","link":80},{"name":"positive","type":"CONDITIONING","link":90},{"name":"negative","type":"CONDITIONING","link":77},{"name":"latent_image","type":"LATENT","link":76}],"outputs":[{"name":"LATENT","type":"LATENT","links":[81]}],"title":"KSampler (WAS) Output","properties":{},"widgets_values":[30,8,"dpmpp_sde","normal",1],"color":"#233","bgcolor":"#355"}],"links":[[7,11,0,13,1,"VAE"],[8,13,0,12,0,"IMAGE"],[10,5,0,4,1,"CONTROL_NET"],[15,11,0,15,1,"VAE"],[18,1,1,7,0,"CLIP"],[19,1,1,6,0,"CLIP"],[20,11,0,16,1,"VAE"],[32,6,0,4,0,"CONDITIONING"],[57,8,0,4,2,"IMAGE"],[58,34,0,8,0,"IMAGE"],[59,13,0,36,0,"IMAGE"],[60,36,0,15,0,"IMAGE"],[62,38,0,37,1,"CONTROL_NET"],[63,6,0,37,0,"CONDITIONING"],[65,39,0,37,2,"IMAGE"],[69,4,0,40,1,"CONDITIONING"],[71,41,0,42,1,"SEED"],[72,1,0,42,0,"MODEL"],[73,37,0,42,2,"CONDITIONING"],[74,7,0,42,3,"CONDITIONING"],[75,9,0,42,4,"LATENT"],[76,15,0,43,4,"LATENT"],[77,7,0,43,3,"CONDITIONING"],[79,1,0,43,0,"MODEL"],[80,41,0,43,1,"SEED"],[81,43,0,16,0,"LATENT"],[82,42,0,13,0,"LATENT"],[83,16,0,44,0,"IMAGE"],[86,36,0,20,0,"IMAGE"],[88,37,0,40,0,"CONDITIONING"],[90,40,0,43,2,"CONDITIONING"]],"groups":[{"title":"Input","bounding":[3,6,395,567],"color":"#b58b2a"},{"title":"Prompts","bounding":[432,7,425,494],"color":"#3f789e"},{"title":"Background deletion","bounding":[883,-40,664,596],"color":"#8A8"},{"title":"Pose and Preview","bounding":[10,581,1539,729],"color":"#88A"},{"title":"Depthmap/Latent","bounding":[1555,579,940,730],"color":"#a1309b"},{"title":"Group","bounding":[2512,175,801,1133],"color":"#8AA"}],"config":{},"extra":{},"version":0.4}